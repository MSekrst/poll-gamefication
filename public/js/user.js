'use strict';let id,timeGame=0,gameFirst=!0;const userModal=$('#user-modal'),selectElements=$('select.styled-select'),alert=$('#validation-alert'),user={sex:'F'},handleSexChange=(a,b)=>{a?user.sex=a.target.value:(user.sex=b.substr(0,1),$(`#${b.toLowerCase()}`).prop('checked',!0)),$('#user-submit').removeAttr('disabled')},handleSelectChange=a=>{a.target.style=''===a.target.value?'':'color:black'},validateUser=()=>{return'M'!==user.sex&&'F'!==user.sex?!1:isNaN(user.income)||0>user.income?!1:isNaN(user.age)||6>user.age||150<user.age?!1:isNaN(user.carsOwned)||0>user.carsOwned||100<user.carsOwned?!1:''!==user.licence&&''!==user.status&&''!==user.currentlyHasCar&&''!==user.knowledge};window.location.pathname.includes('/anketa/game/')&&24===window.location.pathname.substr(13).length?(id=window.location.pathname.substr(13),gameFirst=!1,helpModal.modal('show'),startGame()):userModal.modal('show'),$('#user-submit').on('click touchstart',a=>{user.age=parseInt($('#age').val(),10),user.status=$('#status').val(),user.income=parseInt($('#income').val(),10),user.knowledge=$('#knowledge').val(),user.carsOwned=parseInt($('#cars-owned').val(),10),user.licence=$('#licence').val(),user.currentlyHasCar=$('#current').val(),validateUser()?$.post('/anketa/user',user,b=>{id=b,sessionStorage&&(sessionStorage.getItem('userID')?id=sessionStorage.getItem('userID'):sessionStorage.setItem('userID',id)),0.5>Math.random()?window.location.href=`http://161.53.19.74/limesurvey/index.php/692151?lang=hr&userID=${id}&BQ=0`:(userModal.modal('hide'),helpModal.modal('show'),startGame())}):(alert.attr('style','display: block'),a.target.blur())}),$('div.sex-container div.sex-wrapper input').change(handleSexChange),$('.sex-image').on('click',a=>{handleSexChange(null,a.target.alt)}),selectElements.change(handleSelectChange);
